<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:sec="http://www.springframework.org/security/tags">

    <ui:composition template="WEB-INF/templates/template-nav.xhtml">
        <ui:define name="head"><title>Words With Attitude</title></ui:define>

        <ui:define name="content">
            <div class="row">
                <div class="col-md-12">
                    <p><h:outputText value="User: #{gameManagerController.username}"/></p>
                    <p><h:outputText value="User: #{gameManagerController.fullName}"/></p>
                    <p><img src="#{gameManagerController.imageUrl}" alt="Picture" /></p>

                    <form id="logout" action="logout" method="POST">
                        <button type="submit" class="btn btn-danger">
                            <i class="fa fa-sign-out"></i> | Log Out
                        </button>
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    </form>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <h2>Create a New Game</h2>
                    <h:form id="createGame">
                        <div class="form-group">
                            <label for="gameName">Name</label>
                            <h:inputText id="gameName" styleClass="form-control" value="#{gameManagerController.name}"/>
                        </div>
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                        <h:commandLink action="#{gameManagerController.createGame}" styleClass="btn btn-primary">
                            <i class="fa fa-plus"></i> Create Game
                        </h:commandLink>
                    </h:form>
                </div>

                <div class="col-md-6">
                    <h2>Available Games</h2>
                    <h:form id="openGame">
                    <ul class="list-group">
                        <ui:repeat value="#{gameManagerController.activeGames}" var="game">
                            <li class="list-group-item">
                                <span class="badge"><h:outputText value="#{game.playerCount}"/></span>
                                <h4 class="list-group-item-heading"><h:outputText value="#{game.name}"/></h4>
                                <p class="list-group-item-text">
                                    Owner: <h:outputText value="#{game.owner.user.fullName}"/>
                                </p>
                                <h:commandLink action="#{gameManagerController.joinGame}" styleClass="btn btn-default">
                                    <i class="fa fa-caret-square-o-right"></i> Join
                                </h:commandLink>
                            </li>
                        </ui:repeat>
                    </ul>
                    </h:form>
                </div>
            </div>
        </ui:define>
    </ui:composition>

</html>